#! /bin/sh
# Copyright (c) 2006 SUSE LINUX Products GmbH
# All rights reserved.
#

# check if we are started as root
# only one of UID and USER must be set correctly
if test "$UID" != 0 -a "$USER" != root; then
    echo "You must be root to start $0."
    exit 1
fi

test -n "$ROOT" && exit 0

LC_ALL=POSIX

/sbin/insserv 2>&1 | grep -q "loop between" && {
    echo "cleaning up rclinks because of detected loop"
    /sbin/insserv -d
}

